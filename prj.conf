# SPDX-License-Identifier: Apache-2.0

# Base C++ Config & Drivers
CONFIG_GPIO=y
CONFIG_CPP=y
CONFIG_STD_CPP20=y
CONFIG_NEWLIB_LIBC=y
CONFIG_SERIAL=y
CONFIG_UART_CONSOLE=y

# --- Logging Subsystem ---
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_BACKEND_UART=y
CONFIG_LOG_DEFAULT_LEVEL=3

# --- Networking Stack ---
CONFIG_NETWORKING=y
CONFIG_NET_L2_ETHERNET=y
CONFIG_NET_LOG=y

# IPv6 Configuration
CONFIG_NET_IPV6=y
CONFIG_NET_CONFIG_SETTINGS=y
CONFIG_NET_CONFIG_NEED_IPV6=y
# By removing AUTO_INIT, we prevent the blocking wait at boot.
# The network interface will still be created and should be configured
# by the stack without halting the entire boot sequence.
# CONFIG_NET_CONFIG_AUTO_INIT is not set

# --- USB Device Stack ---
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_VID=0x1209
CONFIG_USB_DEVICE_PID=0x0001
# The device will enumerate with a default name.
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=y
CONFIG_USB_DC_STM32=y

# --- USB Classes ---
CONFIG_USB_CDC_ACM=y
CONFIG_USB_DEVICE_NETWORK_ECM=y

# Kernel options for networking threads
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
